import { motion } from "framer-motion";
import HandWriting from "../components/hand_writing";
import "./page_cover.css"
import { useState } from "react";

export default function Title({ onScroll }: { onScroll: () => void }) {
    const [touchStart, setTouchStart] = useState(0);
    const [touchEnd, setTouchEnd] = useState(0);

    const handleWheel = (e: React.WheelEvent) => {
        if (e.deltaY > 0) {
            onScroll();
        }
    };

    const handleTouchStart = (e: React.TouchEvent) => {
        setTouchStart(e.targetTouches[0].clientY);
    };

    const handleTouchMove = (e: React.TouchEvent) => {
        setTouchEnd(e.targetTouches[0].clientY);
    };

    const handleTouchEnd = () => {
        if (touchStart - touchEnd > 50) {
            // Swiped up (scrolling down)
            onScroll();
        }
    };

    return (
        <motion.div
            className="title-page main-container flex-center"
            onWheel={handleWheel}
            onTouchStart={handleTouchStart}
            onTouchMove={handleTouchMove}
            onTouchEnd={handleTouchEnd}
            initial={{ opacity: 1 }}
            exit={{ opacity: 0 }}
            transition={{ duration: 1.2, ease: 'easeOut' }}
        >
            <span className="t0">
                <HandWriting
                duration={5}
                    paths={[
                        {
                            strokeWidth: 0.4,
                            d: "M 1.3 6.148 L 1.3 7.766 M 1.348 6.12 L 4.533 6.12 L 4.546 7.837 M 1.666 6.928 L 4.148 6.948 M 1.387 7.771 L 4.402 7.771 M 1.453 8.296 L 0.758 9.187 M 1.374 8.741 L 4.9 8.741 M 1.335 9.685 L 4.572 9.737 M 2.973 8.401 L 2.973 10.681 M 0.627 10.694 L 5.162 10.694 M 6.723 5.995 L 6 7.122 M 6.656 6.55 L 7.849 6.559 M 6.32 7.626 L 7.648 7.66 M 6.05 8.837 L 7.9 8.803 M 6.925 7.626 L 6.895 10.744 L 7.749 10.149 M 8.9 6.105 L 8.428 7.533 M 8.939 6.943 L 10.683 6.943 M 8.192 8.464 L 11.102 8.477 M 9.699 5.829 C 9.666 8.45 9.649 9.358 8.245 10.705 M 9.649 8.938 C 9.902 9.644 10.238 10.182 11.141 10.758 M 3.612 11.73 L 5.378 11.713 M 3.763 12.285 L 3.763 12.84 M 3.847 12.285 L 4.436 12.268 L 4.436 12.84 M 3.881 12.852 L 4.334 12.852 M 3.539 13.378 L 5.568 13.378 M 3.753 13.919 L 3.759 14.554 M 3.921 13.927 L 4.525 13.919 L 4.533 14.564 M 3.905 14.556 L 4.398 14.524 M 5.075 11.778 L 5.091 14.993 L 4.703 14.803 M 6.014 11.523 C 5.918 12.001 5.823 12.43 5.648 12.828 M 5.974 12.184 L 7.033 12.2 L 6.853 12.889 M 6.261 12.725 C 6.253 13.879 6.046 14.166 5.64 14.914 M 6.356 13.728 C 6.515 14.189 6.786 14.635 6.993 14.842 M 8.012 11.778 C 8.02 12.964 7.98 13.823 7.733 14.635 M 8.075 11.73 L 9.524 11.746 L 9.524 12.502 M 8.163 12.502 L 9.429 12.502 M 8.211 13.25 L 9.707 13.242 M 8.967 12.717 L 8.951 13.871 M 8.362 14.006 L 8.386 15.001 M 8.473 13.99 L 9.572 13.975 L 9.569 15.026 M 8.505 14.826 L 9.397 14.818 M 10.296 12.001 L 10.288 13.99 M 10.989 11.571 L 10.933 14.977 L 10.596 14.851 M 12 11.706 L 12 15.049 M 12.119 11.69 L 12.875 11.69 L 12.532 12.747 C 12.953 13.631 12.802 14.236 12.451 13.968 M 14.163 11.53 L 14.354 11.888 M 13.28 12.055 L 13.272 12.501 M 13.367 12.071 L 15.286 12.079 L 15.19 12.517 M 13.614 12.819 L 14.856 12.827 M 13.32 13.551 L 15.302 13.535 M 13.895 13.732 C 13.882 14.296 13.566 14.745 13.113 15.04 M 14.556 13.727 L 14.577 14.96 L 15.373 14.952 L 15.461 14.538",
                        },
                        {
                            strokeWidth: 0.2,
                            d: "M 14.513 6.105 C 14.951 5.313 11.37 5.95 11.592 7.128 C 11.72 7.59 12.428 7.494 12.842 7.781 C 12.858 8.155 12.062 8.489 12.006 8.195 M 12.969 7.152 L 14.108 6.953 M 13.901 5.672 C 13.7127 6.673 13.428 7.703 13.336 8.675 M 14.636 7.297 C 14.003 7.447 13.297 8.312 14.515 7.689 C 14.612 7.616 14.646 7.462 14.655 7.336 C 14.636 7.66 14.564 7.819 14.675 8.037 M 15.192 7.172 C 15.115 7.539 15.134 7.844 15.25 8.192 C 15.192 7.8 14.868 7.355 15.801 7.394 M 16.275 6.925 L 16.105 8.177 C 16.163 7.699 16.139 7.186 16.478 7.056 C 17.657 6.621 17.522 7.036 16.328 7.486 C 16.903 8.09 17.458 8.805 18.44 8.796 C 18.788 8.762 18.792 8.622 18.749 8.506 M 18.208 7.491 C 17.386 7.819 17.275 8.298 18.111 7.95 C 18.188 7.911 18.208 7.713 18.222 7.597 C 18.237 8.544 18.348 8.622 18.826 7.578 C 18.754 7.882 18.734 8.071 18.739 8.312 M 18.754 6.577 C 18.846 6.485 18.933 6.524 19.01 6.422 M 19.904 5.345 C 19.333 6.466 19.038 8.085 19.541 8.651 M 14.258 9.569 L 14.132 9.226 C 14.64 9.187 15.123 9.216 15.592 9.265 C 15.346 9.158 15.138 9.105 14.838 9.076 C 14.408 10.222 14.244 11.377 15.515 10.811 M 15.95 9.255 C 15.892 9.854 15.814 10.483 15.703 11.058 C 16.356 9.178 16.22 10.947 15.983 11.222 M 16.342 10.615 C 17.114 10.333 16.712 10.158 16.495 10.302 C 16.349 10.43 16.261 11.373 17.189 10.297 C 16.841 10.278 16.856 11.096 17.317 10.681 C 17.424 10.558 17.634 10.318 17.362 10.296 C 17.117 10.279 17.483 11.069 17.598 10.729 M 17.723 10.173 C 18.303 9.941 18.11 9.791 17.975 9.666 C 17.989 9.956 17.491 11.744 18.004 10.734 M 18.255 10.599 C 18.651 10.468 18.63 10.218 18.356 10.231 C 18.156 10.257 18.153 10.922 18.327 10.98 C 18.458 11 18.729 10.545 18.878 10.275 C 18.922 10.478 18.903 10.758 18.825 11.038 C 18.912 10.579 19.081 10.217 19.188 10.207 C 19.318 10.207 19.265 10.386 19.57 10.115",
                        },
                    ]}
                />
            </span>

            <span className="t1 flex-center">
                <span>剧本</span>
                <span>演员</span>
                <span>动画</span>
            </span>
        </motion.div>
    );
}
